<div class="min-h-screen py-8 px-6">
  <div class="container mx-auto max-w-4xl px-4 sm:px-8 text-center">
    <h1 class="text-2xl sm:text-2xl font-bold">
      結果発表
    </h1>
  </div>

  <!-- カード比較セクション（横スクロールなし） -->
  <div class="battle-cards-reveal my-8 flex flex-row items-center justify-center gap-4 flex-wrap md:flex-nowrap">
    <!-- プレイヤーカード -->
    <div class="player-card-section text-center flex-1 min-w-0 max-w-[150px] sm:max-w-[180px]">
      <h3 class="text-lg sm:text-xl font-medium mb-2 truncate">
        <%= @battle.user.display_name || @battle.user.name %>
      </h3>
      <%= card_image_tag(@battle.user_card, class: "mx-auto w-full h-auto") %>
      <p class="text-base sm:text-lg font-bold mt-2">カード: <%= @battle.user_card %></p>
    </div>

    <!-- VS表示 -->
    <div class="vs-section text-center flex-shrink-0 px-2">
      <h2 class="text-3xl sm:text-4xl md:text-5xl font-extrabold">VS</h2>
    </div>

    <!-- 相手カード -->
    <div class="opponent-card-section text-center flex-1 min-w-0 max-w-[150px] sm:max-w-[180px]">
      <h3 class="text-lg sm:text-xl font-medium mb-2 truncate">
        <%= @battle.opponent.display_name || @battle.opponent.name %>
      </h3>
      <%= card_image_tag(@battle.opponent_card, class: "mx-auto w-full h-auto") %>
      <p class="text-base sm:text-lg font-bold mt-2">カード: <%= @battle.opponent_card %></p>
    </div>
  </div>

  <!-- 勝敗結果 -->
  <div class="battle-result text-center my-8">
    <% winner = User.find(@battle.winner_id) %>
    <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold">
      <%= winner.display_name || winner.name %> の勝利！
    </h2>

    <!-- アクションボタン -->
    <div class="mt-6 flex flex-col md:flex-row justify-center items-center gap-4">
      <%= link_to "もう一度対戦", new_battle_path(opponent_id: @battle.opponent.id),
            class: "px-4 py-2 bg-yellow-400 text-blue-900 font-bold rounded-lg shadow-md hover:bg-yellow-500 transform hover:-translate-y-1 transition-all max-w-[180px] w-full text-center" %>

      <%= link_to "対戦相手一覧に戻る", users_path,
            class: "px-4 py-2 bg-gray-600 text-white font-bold rounded-lg shadow-md hover:bg-gray-700 transform hover:-translate-y-1 transition-all max-w-[180px] w-full text-center" %>
    </div>

    <!-- Twitterシェア -->
    <div class="mt-6 text-center">
      <%= link_to "https://twitter.com/intent/tweet?text=#{CGI.escape(battle_share_text(@battle))}&url=#{CGI.escape(root_url)}",
            target: "_blank",
            rel: "noopener noreferrer",
            class: "inline-flex items-center justify-center px-4 py-2 bg-black text-white font-bold rounded-lg shadow hover:bg-gray-800 transition max-w-[180px] w-full mx-auto" do %>

        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
          <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.80l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
        </svg>

        <span>結果をシェア</span>
      <% end %>
    </div>
  </div>
</div>
